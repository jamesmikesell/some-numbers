<div class="centered">
  <mat-form-field class="game-number">
    <mat-label>Game #</mat-label>
    <input
      matInput
      type="number"
      [ngModel]="gameNumber"
      (ngModelChange)="updateGameNumber($event)"
      min="1"
    />
  </mat-form-field>

  Fails: {{ fails }} &nbsp; Solvable: {{ solvable }}
</div>

<div class="container">
  <div class="grid" [style.--columnCount]="grid.length + 0">
    <div class="cell">
      <!-- blank first cell -->
    </div>

    <div class="cell">
      <!-- gap -->
    </div>

    <!-- column headers -->
    @for (i of [].constructor(grid.length); track $index) {
      <div class="cell bg-muted">
        <div class="corner-number"></div>
        <div class="content">{{ goalColumns[$index] }}</div>
      </div>
    }

    @for (i of [].constructor(grid.length + 2); track $index) {
      <div class="cell">
        <!-- first row gap -->
      </div>
    }

    @for (row of grid; track $index; let rowIndex = $index) {
      <!-- row headers -->
      <div class="cell bg-muted">
        <div class="corner-number"></div>
        <div class="content">{{ goalRows[rowIndex] }}</div>
      </div>

      <div class="cell">
        <!-- gap -->
      </div>

      @for (cell of row; track $index) {
        <div
          class="cell color-{{ cell.groupNumber }}"
          (click)="use(cell)"
          (contextmenu)="clear(cell); $event.preventDefault()"
          appHammerSwipe
          (swipeUp)="use(cell)"
          (swipeDown)="clear(cell)"
          class="no-select"
        >
          <div class="corner-number bg-muted">
            {{ cell.colorGroupGoalDisplay }}
          </div>
          <div
            class="content"
            [class.circle]="cell.status === SelectionStatus.SELECTED"
          >
            @if (cell.status !== SelectionStatus.CLEARED) {
              {{ cell.value }}
            }
          </div>
        </div>
      }
    }
  </div>
</div>
