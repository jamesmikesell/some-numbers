<div class="page-container no-select">
  <div class="top-section">
    <div class="centered">
      <div class="top-controls">
        <div class="game-controls">
          <button
            matMiniFab
            class="game-button"
            [disabled]="gameNumber <= 1"
            (click)="updateGameNumber(gameNumber - 1)"
          >
            <mat-icon>do_not_disturb_on</mat-icon>
          </button>

          <mat-form-field class="game-number">
            <mat-label>Game #</mat-label>
            <input
              matInput
              type="number"
              [ngModel]="gameNumber"
              (ngModelChange)="updateGameNumber($event)"
              min="1"
            />
          </mat-form-field>

          <button
            matMiniFab
            class="game-button"
            (click)="updateGameNumber(gameNumber + 1)"
          >
            <mat-icon>add_circle</mat-icon>
          </button>
        </div>

        <div class="stats">
          <div style="display: inline-flex; align-items: center">
            <span>Mistakes: {{ mistakes }}</span>

            @if (!solvable) {
              &nbsp;&nbsp;&nbsp;
              <mat-icon style="color: light-dark(#ee0000, #ff3a3a)"
                >report_problem</mat-icon
              >
              <span>Unsolvable puzzle</span>
            }
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="game-board-section">
    <div class="container">
      <table class="game-table">
        @for (row of gameBoard.fullBoard; track $index; let rowIndex = $index) {
          <tr>
            @for (cell of row; track $index; let colIndex = $index) {
              <td>
                @if (rowIndex === 0 && colIndex === 0) {
                  <app-cell
                    [displayType]="'blank'"
                    [columnCount]="columnCount"
                  ></app-cell>
                } @else if (
                  rowIndex === 0 || (rowIndex > 0 && colIndex === 0)
                ) {
                  <app-cell
                    [displayType]="'header'"
                    [cell]="cell"
                    [columnCount]="columnCount"
                  ></app-cell>
                } @else {
                  <app-cell
                    [displayType]="'standard'"
                    [cell]="cell"
                    [columnCount]="columnCount"
                    (used)="use($event)"
                    (cleared)="clear($event)"
                  ></app-cell>
                }
              </td>
            }
          </tr>
        }
      </table>
    </div>
  </div>
</div>
